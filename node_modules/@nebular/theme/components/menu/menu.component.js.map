{"version":3,"file":"menu.component.js","sourceRoot":"","sources":["../../../../../.ng_build/theme/components/menu/menu.component.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  OnInit,\n  OnDestroy,\n  HostBinding,\n  AfterViewInit,\n  Inject,\n  DoCheck,\n} from '@angular/core';\nimport { Router, NavigationEnd } from '@angular/router';\nimport { BehaviorSubject } from 'rxjs';\nimport { takeWhile, filter, map } from 'rxjs/operators';\nimport { NbMenuInternalService, NbMenuItem, NbMenuBag, NbMenuService } from './menu.service';\nimport { convertToBoolProperty } from '../helpers';\nimport { NB_WINDOW } from '../../theme.options';\nimport { animate, state, style, transition, trigger } from '@angular/animations';\n\nexport enum NbToggleStates {\n  Expanded = 'expanded',\n  Collapsed = 'collapsed',\n}\n\n@Component({\n  selector: '[nbMenuItem]',\n  templateUrl: './menu-item.component.html',\n  animations: [\n    trigger('toggle', [\n      state(NbToggleStates.Collapsed, style({ height: '0' })),\n      state(NbToggleStates.Expanded, style({ height: '*' })),\n      transition(`${NbToggleStates.Collapsed} <=> ${NbToggleStates.Expanded}`, animate(300)),\n    ]),\n  ],\n})\nexport class NbMenuItemComponent implements DoCheck, AfterViewInit, OnDestroy {\n  @Input() menuItem = <NbMenuItem>null;\n\n  @Output() hoverItem = new EventEmitter<any>();\n  @Output() toggleSubMenu = new EventEmitter<any>();\n  @Output() selectItem = new EventEmitter<any>();\n  @Output() itemClick = new EventEmitter<any>();\n\n  private alive = true;\n  toggleState: NbToggleStates;\n\n  constructor(private menuService: NbMenuService) {}\n\n  ngDoCheck() {\n    this.toggleState = this.menuItem.expanded ? NbToggleStates.Expanded : NbToggleStates.Collapsed;\n  }\n\n  ngAfterViewInit() {\n    this.menuService.onSubmenuToggle()\n      .pipe(\n        takeWhile(() => this.alive),\n        filter(({ item }) => item === this.menuItem),\n        map(({ item }: NbMenuBag) => item.expanded),\n      )\n      .subscribe(isExpanded => this.toggleState = isExpanded ? NbToggleStates.Expanded : NbToggleStates.Collapsed);\n  }\n\n  ngOnDestroy() {\n    this.alive = false;\n  }\n\n  onToggleSubMenu(item: NbMenuItem) {\n    this.toggleSubMenu.emit(item);\n  }\n\n  onHoverItem(item: NbMenuItem) {\n    this.hoverItem.emit(item);\n  }\n\n  onSelectItem(item: NbMenuItem) {\n    this.selectItem.emit(item);\n  }\n\n  onItemClick(item: NbMenuItem) {\n    this.itemClick.emit(item);\n  }\n}\n\n/**\n * Vertical menu component.\n *\n * Accepts a list of menu items and renders them accordingly. Supports multi-level menus.\n *\n * Basic example\n * @stacked-example(Showcase, menu/menu-showcase.component)\n *\n * ```ts\n * // ...\n * items: NbMenuItem[] = [\n *  {\n *    title: home,\n *    link: '/'\n *  },\n *  {\n *    title: dashboard,\n *    link: 'dashboard'\n *  }\n * ];\n * // ...\n * <nb-menu [items]=\"items\"></nb-menu>\n * ```\n * ### Installation\n *\n * Import `NbMenuModule.forRoot()` to your app module.\n * ```ts\n * @NgModule({\n *   imports: [\n *   \t// ...\n *     NbMenuModule.forRoot(),\n *   ],\n * })\n * export class AppModule { }\n * ```\n * and `NbMenuModule` to your feature module where the component should be shown:\n * ```ts\n * @NgModule({\n *   imports: [\n *   \t// ...\n *     NbMenuModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * Two-level menu example\n * @stacked-example(Two Levels, menu/menu-children.component)\n *\n *\n * Autocollapse menu example\n * @stacked-example(Autocollapse Menu, menu/menu-autocollapse.component)\n *\n *\n * @styles\n *\n * menu-font-family:\n * menu-font-size:\n * menu-font-weight:\n * menu-fg:\n * menu-bg:\n * menu-active-fg:\n * menu-active-bg:\n * menu-active-font-weight:\n * menu-submenu-bg:\n * menu-submenu-fg:\n * menu-submenu-active-fg:\n * menu-submenu-active-bg:\n * menu-submenu-active-border-color:\n * menu-submenu-active-shadow:\n * menu-submenu-hover-fg:\n * menu-submenu-hover-bg:\n * menu-submenu-item-border-width:\n * menu-submenu-item-border-radius:\n * menu-submenu-item-padding:\n * menu-submenu-item-container-padding:\n * menu-submenu-padding:\n * menu-group-font-weight:\n * menu-group-font-size:\n * menu-group-fg:\n * menu-group-padding\n * menu-item-padding:\n * menu-item-separator:\n * menu-icon-font-size:\n * menu-icon-margin:\n * menu-icon-color:\n * menu-icon-active-color:\n */\n@Component({\n  selector: 'nb-menu',\n  styleUrls: ['./menu.component.css'],\n  template: `\n    <ul class=\"menu-items\">\n      <ng-container *ngFor=\"let item of items\">\n        <li nbMenuItem *ngIf=\"!item.hidden\"\n            [menuItem]=\"item\"\n            [class.menu-group]=\"item.group\"\n            (hoverItem)=\"onHoverItem($event)\"\n            (toggleSubMenu)=\"onToggleSubMenu($event)\"\n            (selectItem)=\"onSelectItem($event)\"\n            (itemClick)=\"onItemClick($event)\"\n            class=\"menu-item\">\n        </li>\n      </ng-container>\n    </ul>\n  `,\n})\nexport class NbMenuComponent implements OnInit, AfterViewInit, OnDestroy {\n  @HostBinding('class.inverse') inverseValue: boolean;\n\n  /**\n   * Tags a menu with some ID, can be later used in the menu service\n   * to determine which menu triggered the action, if multiple menus exist on the page.\n   *\n   * @type {string}\n   */\n  @Input() tag: string;\n\n  /**\n   * List of menu items.\n   * @type List<NbMenuItem> | List<any> | any\n   */\n  @Input() items: NbMenuItem[];\n\n  /**\n   * Makes colors inverse based on current theme\n   * @type boolean\n   */\n  @Input()\n  set inverse(val: boolean) {\n    this.inverseValue = convertToBoolProperty(val);\n  }\n\n  /**\n   * Collapse all opened submenus on the toggle event\n   * Default value is \"false\"\n   * @type boolean\n   */\n  @Input()\n  set autoCollapse(val: boolean) {\n    this.autoCollapseValue = convertToBoolProperty(val);\n  }\n\n  private alive: boolean = true;\n  private autoCollapseValue: boolean = false;\n\n  constructor(@Inject(NB_WINDOW) private window,\n              private menuInternalService: NbMenuInternalService,\n              private router: Router) {\n  }\n\n  ngOnInit() {\n    this.menuInternalService.prepareItems(this.items);\n\n    this.menuInternalService\n      .onAddItem()\n      .pipe(\n        takeWhile(() => this.alive),\n        filter((data: { tag: string; items: NbMenuItem[] }) => this.compareTag(data.tag)),\n      )\n      .subscribe(data => this.onAddItem(data));\n\n    this.menuInternalService\n      .onNavigateHome()\n      .pipe(\n        takeWhile(() => this.alive),\n        filter((data: { tag: string; items: NbMenuItem[] }) => this.compareTag(data.tag)),\n      )\n      .subscribe(() => this.navigateHome());\n\n    this.menuInternalService\n      .onGetSelectedItem()\n      .pipe(\n        takeWhile(() => this.alive),\n        filter((data: { tag: string; listener: BehaviorSubject<NbMenuBag> }) => this.compareTag(data.tag)),\n      )\n      .subscribe((data: { tag: string; listener: BehaviorSubject<NbMenuBag> }) => {\n        data.listener.next({ tag: this.tag, item: this.getSelectedItem(this.items) });\n      });\n\n    this.menuInternalService\n      .onCollapseAll()\n      .pipe(\n        takeWhile(() => this.alive),\n        filter((data: { tag: string }) => this.compareTag(data.tag)),\n      )\n      .subscribe(() => this.collapseAll());\n\n    this.router.events\n      .pipe(\n        takeWhile(() => this.alive),\n        filter(event => event instanceof NavigationEnd),\n      )\n      .subscribe(() => {\n        this.menuInternalService.selectFromUrl(this.items, this.tag, this.autoCollapseValue);\n      });\n  }\n\n  ngAfterViewInit() {\n    setTimeout(() => this.menuInternalService.selectFromUrl(this.items, this.tag, this.autoCollapseValue));\n  }\n\n  onAddItem(data: { tag: string; items: NbMenuItem[] }) {\n    this.items.push(...data.items);\n\n    this.menuInternalService.prepareItems(this.items);\n    this.menuInternalService.selectFromUrl(this.items, this.tag, this.autoCollapseValue);\n  }\n\n  onHoverItem(item: NbMenuItem) {\n    this.menuInternalService.itemHover(item, this.tag);\n  }\n\n  onToggleSubMenu(item: NbMenuItem) {\n    if (this.autoCollapseValue) {\n      this.menuInternalService.collapseAll(this.items, this.tag, item);\n    }\n    item.expanded = !item.expanded;\n    this.menuInternalService.submenuToggle(item, this.tag);\n  }\n\n  // TODO: is not fired on page reload\n  onSelectItem(item: NbMenuItem) {\n    this.menuInternalService.selectItem(item, this.items, this.autoCollapseValue, this.tag);\n  }\n\n  onItemClick(item: NbMenuItem) {\n    this.menuInternalService.itemClick(item, this.tag);\n  }\n\n  ngOnDestroy() {\n    this.alive = false;\n  }\n\n  private navigateHome() {\n    const homeItem = this.getHomeItem(this.items);\n\n    if (homeItem) {\n      if (homeItem.link) {\n        this.router.navigate([homeItem.link], { queryParams: homeItem.queryParams, fragment: homeItem.fragment });\n      }\n\n      if (homeItem.url) {\n        this.window.location.href = homeItem.url;\n      }\n    }\n  }\n\n  private collapseAll() {\n    this.menuInternalService.collapseAll(this.items, this.tag);\n  }\n\n  private getHomeItem(items: NbMenuItem[]): NbMenuItem {\n    for (const item of items) {\n      if (item.home) {\n        return item;\n      }\n\n      const homeItem = item.children && this.getHomeItem(item.children);\n      if (homeItem) {\n        return homeItem;\n      }\n    }\n  }\n\n  private compareTag(tag: string) {\n    return !tag || tag === this.tag;\n  }\n\n  private getSelectedItem(items: NbMenuItem[]): NbMenuItem {\n    let selected = null;\n    items.forEach((item: NbMenuItem) => {\n      if (item.selected) {\n        selected = item;\n      }\n      if (item.selected && item.children && item.children.length > 0) {\n        selected = this.getSelectedItem(item.children);\n      }\n    });\n    return selected;\n  }\n}\n"]}