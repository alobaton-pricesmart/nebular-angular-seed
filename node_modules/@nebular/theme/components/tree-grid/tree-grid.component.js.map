{"version":3,"file":"tree-grid.component.js","sourceRoot":"","sources":["../../../../../.ng_build/theme/components/tree-grid/tree-grid.component.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport {\n  AfterViewInit,\n  Attribute,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ContentChildren,\n  ElementRef, HostBinding,\n  Inject,\n  Input,\n  IterableDiffers,\n  OnDestroy,\n  QueryList,\n} from '@angular/core';\nimport { fromEvent, merge } from 'rxjs';\nimport { debounceTime, takeWhile } from 'rxjs/operators';\n\nimport { NB_DOCUMENT, NB_WINDOW } from '../../theme.options';\nimport { NbPlatform } from '../cdk/platform';\nimport { NbDirectionality } from '../cdk/bidi';\nimport { NB_TABLE_TEMPLATE, NbTable } from '../cdk/table';\nimport { NbTreeGridDataSource, NbTreeGridDataSourceBuilder } from './data-source/tree-grid-data-source';\nimport { DEFAULT_ROW_LEVEL, NbTreeGridNode, NbTreeGridPresentationNode } from './data-source/tree-grid.model';\nimport { NbToggleOptions } from './data-source/tree-grid.service';\nimport { NB_TREE_GRID } from './tree-grid-injection-tokens';\nimport { NbTreeGridRowComponent } from './tree-grid-row.component';\nimport { NbTreeGridCellDirective } from './tree-grid-cell.component';\nimport { convertToBoolProperty } from '../helpers';\nimport { NbTreeGridColumnDefDirective } from './tree-grid-column-def.directive';\nimport {\n  NbTreeGridFooterRowDefDirective,\n  NbTreeGridHeaderRowDefDirective,\n  NbTreeGridRowDefDirective,\n} from './tree-grid-def.component';\nimport { NbColumnsService } from './tree-grid-columns.service';\n\n/**\n * Tree grid component that can be used to display nested rows of data.\n * Supports filtering and sorting.\n * @stacked-example(Showcase, tree-grid/tree-grid-showcase.component)\n *\n * Data provided to source should match [NbTreeGridNode](docs/components/treegrid/api#nbtreegridnode) interface.\n * As the most basic usage you need to define [nbTreeGridRowDef](docs/components/treegrid/api#nbtreegridrowdefdirective)\n * where you should pass columns to display in rows and\n * [nbTreeGridColumnDef](docs/components/treegrid/api#nbtreegridcolumndefdirective) - component containing cell\n * definitions for each column passed to row definition.\n * @stacked-example(Basic, tree-grid/tree-grid-basic.component)\n *\n * To use sorting you can add `nbSort` directive to table and subscribe to `sort` method. When user click on header,\n * sort event will be emitted. Event object contain clicked column name and desired sort direction.\n * @stacked-example(Sortable, tree-grid/tree-grid-sortable.component)\n *\n * You can use `Data Source Builder` to create `NbTreeGridDataSource` which would have toggle, sort and\n * filter methods. Then you can call this methods to change sort or toggle rows programmatically. Also `nbSort` and\n * `nbFilterInput` directives both support `NbTreeGridDataSource`, so you can pass it directly as an input and\n * directives will trigger sort, toggle themselves.\n * @stacked-example(Data Source Builder, tree-grid/tree-grid-showcase.component)\n *\n * You can create responsive grid by setting `hideOn` and `showOn` inputs of\n * [nbTreeGridColumnDef](docs/components/tree-grid/api#nbtreegridcolumndefdirective) directive.\n * When viewport reaches specified width grid hides or shows columns.\n * @stacked-example(Responsive columns, tree-grid/tree-grid-responsive.component)\n *\n * To customize sort or row toggle icons you can use `nbSortHeaderIcon` and `nbTreeGridRowToggle` directives\n * respectively. `nbSortHeaderIcon` is a structural directive and it's implicit context set to current direction.\n * Also context has three properties: `isAscending`, `isDescending` and `isNone`.\n * @stacked-example(Custom icons, tree-grid/tree-grid-custom-icons.component)\n *\n * By default, row to toggle happens when user clicks anywhere in the row. Also double click expands row deeply.\n * To disable this you can set `[clickToToggle]=\"false\"` input of `nbTreeGridRow`.\n * @stacked-example(Disable click toggle, tree-grid/tree-grid-disable-click-toggle.component)\n *\n * @styles\n *\n * tree-grid-cell-border-width\n * tree-grid-cell-border-style\n * tree-grid-cell-border-color\n * tree-grid-row-min-height\n * tree-grid-cell-padding\n * tree-grid-sort-header-button-background\n * tree-grid-sort-header-button-border\n * tree-grid-sort-header-button-padding\n * tree-grid-sort-header-button-font-weight\n * tree-grid-header-bg\n * tree-grid-footer-bg\n * tree-grid-row-bg\n * tree-grid-row-bg-even\n * tree-grid-row-hover-bg\n * tree-grid-sort-header-button-color\n * tree-grid-icon-color\n */\n@Component({\n  selector: 'table[nbTreeGrid]',\n  template: NB_TABLE_TEMPLATE,\n  styleUrls: ['./tree-grid.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  providers: [\n    { provide: NB_TREE_GRID, useExisting: NbTreeGridComponent },\n    NbColumnsService,\n  ],\n})\nexport class NbTreeGridComponent<T> extends NbTable<NbTreeGridPresentationNode<T>>\n                                    implements AfterViewInit, OnDestroy {\n\n  constructor(private dataSourceBuilder: NbTreeGridDataSourceBuilder<T>,\n              differs: IterableDiffers,\n              changeDetectorRef: ChangeDetectorRef,\n              elementRef: ElementRef,\n              @Attribute('role') role: string,\n              dir: NbDirectionality,\n              @Inject(NB_DOCUMENT) document: any,\n              platform: NbPlatform | undefined,\n              @Inject(NB_WINDOW) private window,\n  ) {\n    super(differs, changeDetectorRef, elementRef, role, dir, document, platform);\n    this.platform = platform;\n  }\n\n  private alive: boolean = true;\n  private _source: NbTreeGridDataSource<T>;\n  private platform: NbPlatform;\n\n  /**\n   * The table's data\n   * @param data\n   * @type {NbTreeGridNode<T>[] | NbTreeGridDataSource}\n   */\n  @Input('nbTreeGrid') set source(data: NbTreeGridNode<T>[]) {\n    if (!data) {\n      return;\n    }\n\n    if (data instanceof NbTreeGridDataSource) {\n      this._source = data;\n    } else {\n      this._source = this.dataSourceBuilder.create(data);\n    }\n    this.dataSource = this._source;\n  }\n\n  @Input() levelPadding: string = '';\n\n  /**\n   * Make all columns equal width. False by default.\n   */\n  @Input()\n  set equalColumnsWidth(value: boolean) {\n    this.equalColumnsWidthValue = convertToBoolProperty(value);\n  }\n  get equalColumnsWidth(): boolean {\n    return this.equalColumnsWidthValue;\n  }\n  private equalColumnsWidthValue: boolean = false;\n\n  @ContentChildren(NbTreeGridRowComponent) private rows: QueryList<NbTreeGridRowComponent>;\n\n  @HostBinding('class.nb-tree-grid') readonly treeClass = true;\n\n  ngAfterViewInit() {\n    this.checkDefsCount();\n    const rowsChange$ = merge(\n      this._contentRowDefs.changes,\n      this._contentHeaderRowDefs.changes,\n      this._contentFooterRowDefs.changes,\n    );\n    rowsChange$.pipe(takeWhile(() => this.alive))\n      .subscribe(() => this.checkDefsCount());\n\n    if (this.platform.isBrowser) {\n      this.updateVisibleColumns();\n\n      const windowResize$ = fromEvent(this.window, 'resize').pipe(debounceTime(50));\n      merge(rowsChange$, this._contentColumnDefs.changes, windowResize$)\n        .pipe(takeWhile(() => this.alive))\n        .subscribe(() => this.updateVisibleColumns());\n    }\n  }\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n    this.alive = false;\n  }\n\n  toggleRow(row: NbTreeGridRowComponent, options?: NbToggleOptions): void {\n    this._source.toggleByIndex(this.getDataIndex(row), options);\n  }\n\n  toggleCellRow(cell: NbTreeGridCellDirective): void {\n    this.toggleRow(this.findCellRow(cell));\n  }\n\n  getColumnWidth(): string {\n    if (this.equalColumnsWidth) {\n      return `${100 / this.getColumnsCount()}%`;\n    }\n    return '';\n  }\n\n  getCellLevel(cell: NbTreeGridCellDirective, columnName: string): number {\n    const isFirstColumn = this.isFirstColumn(columnName);\n    const row = isFirstColumn && this.findCellRow(cell);\n    const level = row && this.getRowLevel(row);\n    if (level || level === 0) {\n      return level;\n    }\n    return DEFAULT_ROW_LEVEL;\n  }\n\n  private getDataIndex(row: NbTreeGridRowComponent): number {\n    const rowEl = row.elementRef.nativeElement;\n    const parent = rowEl.parentElement;\n    if (parent) {\n      return Array.from(parent.children)\n        .filter((child: Element) => child.hasAttribute('nbtreegridrow'))\n        .indexOf(rowEl);\n    }\n\n    return -1;\n  }\n\n  private getRowLevel(row: NbTreeGridRowComponent): number {\n    return this._source.getLevel(this.getDataIndex(row));\n  }\n\n  private getColumns(): string[] {\n    const { columns } = this._contentHeaderRowDefs.length\n      ? this._contentHeaderRowDefs.first\n      : this._contentRowDefs.first;\n\n    return Array.from(columns || []);\n  }\n\n  private getColumnsCount(): number {\n    return this.getColumns().length;\n  }\n\n  private isFirstColumn(columnName: string): boolean {\n    return this.getColumns()[0] === columnName;\n  }\n\n  private findCellRow(cell: NbTreeGridCellDirective): NbTreeGridRowComponent | undefined {\n    const cellRowElement = cell.elementRef.nativeElement.parentElement;\n\n    return this.rows.toArray()\n      .find((row: NbTreeGridRowComponent) => {\n        return row.elementRef.nativeElement === cellRowElement;\n      });\n  }\n\n  private checkDefsCount(): void {\n    if (this._contentRowDefs.length > 1) {\n      throw new Error(`Found multiple row definitions`);\n    }\n    if (this._contentHeaderRowDefs.length > 1) {\n      throw new Error(`Found multiple header row definitions`);\n    }\n    if (this._contentFooterRowDefs.length > 1) {\n      throw new Error(`Found multiple footer row definitions`);\n    }\n  }\n\n  private updateVisibleColumns(): void {\n    const width = this.window.innerWidth;\n    const columnDefs = (this._contentColumnDefs as QueryList<NbTreeGridColumnDefDirective>);\n\n    const columnsToHide: string[] = columnDefs\n      .filter((col: NbTreeGridColumnDefDirective) => col.shouldHide(width))\n      .map(col => col.name);\n\n    const columnsToShow: string[] = columnDefs\n      .filter((col: NbTreeGridColumnDefDirective) => col.shouldShow(width))\n      .map(col => col.name);\n\n    if (!columnsToHide.length && !columnsToShow.length) {\n      return;\n    }\n\n    const rowDefs = [\n      this._contentHeaderRowDefs.first as NbTreeGridHeaderRowDefDirective,\n      this._contentRowDefs.first as NbTreeGridRowDefDirective<any>,\n      this._contentFooterRowDefs.first as NbTreeGridFooterRowDefDirective,\n    ].filter(d => !!d);\n\n    for (const rowDef of rowDefs) {\n      for (const column of columnsToHide) {\n        rowDef.hideColumn(column);\n      }\n\n      for (const column of columnsToShow) {\n        rowDef.showColumn(column);\n      }\n    }\n  }\n}\n"]}