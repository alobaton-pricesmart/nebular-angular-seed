{"version":3,"file":"chat-message-file.component.js","sourceRoot":"","sources":["../../../../../.ng_build/theme/components/chat/chat-message-file.component.ts"],"names":[],"mappings":"AAAA;;;;GAIG;;;;;;;;;;;;;;;;;;;;;AAEH,OAAO,EAAE,uBAAuB,EAAE,iBAAiB,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,eAAe,CAAC;AAC7F,OAAO,EAAE,YAAY,EAAE,MAAM,2BAA2B,CAAC;AAEzD;;;;;GAKG;AA0BH;IAuCE,oCAAoB,EAAqB,EAAU,YAA0B;QAAzD,OAAE,GAAF,EAAE,CAAmB;QAAU,iBAAY,GAAZ,YAAY,CAAc;IAC7E,CAAC;IAbD,sBAAI,6CAAK;QALT;;;WAGG;aAEH,UAAU,KAAY;YADtB,iBAWC;YATC,IAAI,CAAC,UAAU,GAAG,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC,GAAG,CAAC,UAAC,IAAS;gBAC5C,IAAM,OAAO,GAAG,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;gBACnC,oBACK,IAAI,IACP,QAAQ,EAAE,OAAO,IAAI,KAAI,CAAC,YAAY,CAAC,wBAAwB,CAAC,SAAO,IAAI,CAAC,GAAG,MAAG,CAAC,EACnF,OAAO,EAAE,OAAO,IAChB;YACJ,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,CAAC;QAC1B,CAAC;;;OAAA;IAMD,4CAAO,GAAP,UAAQ,IAAS;QACf,OAAO,CAAC,WAAW,EAAE,YAAY,EAAE,WAAW,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACtE,CAAC;IArCQ;QAAR,KAAK,EAAE;;+DAAiB;IAMhB;QAAR,KAAK,EAAE;;8DAAgB;IAMf;QAAR,KAAK,EAAE;kCAAO,IAAI;4DAAC;IAOpB;QADC,KAAK,EAAE;;;2DAWP;IArCU,0BAA0B;QAzBtC,SAAS,CAAC;YACT,QAAQ,EAAE,sBAAsB;YAChC,QAAQ,EAAE,+2BAoBT;YACD,eAAe,EAAE,uBAAuB,CAAC,MAAM;SAChD,CAAC;yCAwCwB,iBAAiB,EAAwB,YAAY;OAvClE,0BAA0B,CA8CtC;IAAD,iCAAC;CAAA,AA9CD,IA8CC;SA9CY,0BAA0B","sourcesContent":["/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n/**\n * Chat message component.\n *\n * @styles\n *\n */\n@Component({\n  selector: 'nb-chat-message-file',\n  template: `\n    <nb-chat-message-text [sender]=\"sender\" [date]=\"date\" [message]=\"message\">\n      {{ message }}\n    </nb-chat-message-text>\n\n    <ng-container *ngIf=\"readyFiles?.length > 1\">\n      <div class=\"message-content-group\">\n        <a *ngFor=\"let file of readyFiles\" [href]=\"file.url\" target=\"_blank\">\n          <span [class]=\"file.icon\" *ngIf=\"!file.urlStyle\"></span>\n          <div *ngIf=\"file.isImage\" [style.background-image]=\"file.urlStyle\"></div>\n        </a>\n      </div>\n    </ng-container>\n\n    <ng-container *ngIf=\"readyFiles?.length === 1\">\n      <a [href]=\"readyFiles[0].url\" target=\"_blank\">\n        <span [class]=\"readyFiles[0].icon\"  *ngIf=\"!readyFiles[0].urlStyle\"></span>\n        <div *ngIf=\"readyFiles[0].isImage\" [style.background-image]=\"readyFiles[0].urlStyle\"></div>\n      </a>\n    </ng-container>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class NbChatMessageFileComponent {\n\n  readyFiles: any[];\n\n  /**\n   * Message sender\n   * @type {string}\n   */\n  @Input() message: string;\n\n  /**\n   * Message sender\n   * @type {string}\n   */\n  @Input() sender: string;\n\n  /**\n   * Message send date\n   * @type {Date}\n   */\n  @Input() date: Date;\n\n  /**\n   * Message file path\n   * @type {Date}\n   */\n  @Input()\n  set files(files: any[]) {\n    this.readyFiles = (files || []).map((file: any) => {\n      const isImage = this.isImage(file);\n      return {\n        ...file,\n        urlStyle: isImage && this.domSanitizer.bypassSecurityTrustStyle(`url(${file.url})`),\n        isImage: isImage,\n      };\n    });\n    this.cd.detectChanges();\n  }\n\n  constructor(private cd: ChangeDetectorRef, private domSanitizer: DomSanitizer) {\n  }\n\n\n  isImage(file: any): boolean {\n    return ['image/png', 'image/jpeg', 'image/gif'].includes(file.type);\n  }\n}\n"]}