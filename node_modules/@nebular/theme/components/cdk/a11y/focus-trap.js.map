{"version":3,"file":"focus-trap.js","sourceRoot":"","sources":["../../../../../../.ng_build/theme/components/cdk/a11y/focus-trap.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,EAAE,MAAM,EAAE,UAAU,EAAE,MAAM,EAAE,MAAM,eAAe,CAAC;AAC3D,OAAO,EAAE,SAAS,EAAE,gBAAgB,EAAE,oBAAoB,EAAE,MAAM,mBAAmB,CAAC;AAEtF,OAAO,EAAE,WAAW,EAAE,MAAM,wBAAwB,CAAC;AAGrD;;KAEK;AACL;IAAiC,+BAAS;IAGxC,qBACY,OAAoB,EACpB,OAA6B,EAC7B,MAAc,EACd,QAAkB,EAC5B,YAAY;QALd,YAME,kBAAM,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,YAAY,CAAC,SAExD;QAPW,aAAO,GAAP,OAAO,CAAa;QACpB,aAAO,GAAP,OAAO,CAAsB;QAC7B,YAAM,GAAN,MAAM,CAAQ;QACd,cAAQ,GAAR,QAAQ,CAAU;QAG5B,KAAI,CAAC,4BAA4B,EAAE,CAAC;;IACtC,CAAC;IAED,kCAAY,GAAZ;QACE,IAAI,CAAC,wBAAwB,CAAC,KAAK,EAAE,CAAC;QACtC,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAED,kDAA4B,GAA5B;QACE,IAAI,CAAC,wBAAwB,CAAC,IAAI,EAAE,CAAC;IACvC,CAAC;IAES,kDAA4B,GAAtC;QACE,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC,QAAQ,CAAC,aAA4B,CAAC;IAC7E,CAAC;IACH,kBAAC;AAAD,CAAC,AAzBD,CAAiC,SAAS,GAyBzC;;AAGD;IAA+C,6CAAgB;IAC7D,mCACY,OAA6B,EAC7B,MAAc,EACK,QAAQ;QAHvC,YAIE,kBAAM,OAAO,EAAE,MAAM,EAAE,QAAQ,CAAC,SACjC;QAJW,aAAO,GAAP,OAAO,CAAsB;QAC7B,YAAM,GAAN,MAAM,CAAQ;QACK,cAAQ,GAAR,QAAQ,CAAA;;IAEvC,CAAC;IAED,0CAAM,GAAN,UAAO,OAAoB,EAAE,oBAA8B;QACzD,OAAO,IAAI,WAAW,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,EAAE,oBAAoB,CAAC,CAAC;IAClG,CAAC;IAVU,yBAAyB;QADrC,UAAU,EAAE;QAKR,WAAA,MAAM,CAAC,WAAW,CAAC,CAAA;yCAFD,oBAAoB;YACrB,MAAM;OAHf,yBAAyB,CAWrC;IAAD,gCAAC;CAAA,AAXD,CAA+C,gBAAgB,GAW9D;SAXY,yBAAyB","sourcesContent":["import { Inject, Injectable, NgZone } from '@angular/core';\nimport { FocusTrap, FocusTrapFactory, InteractivityChecker } from '@angular/cdk/a11y';\n\nimport { NB_DOCUMENT } from '../../../theme.options';\n\n\n/**\n * Overrides angular cdk focus trap to keep restore functionality inside trap.\n * */\nexport class NbFocusTrap extends FocusTrap {\n  protected previouslyFocusedElement: HTMLElement;\n\n  constructor(\n    protected element: HTMLElement,\n    protected checker: InteractivityChecker,\n    protected ngZone: NgZone,\n    protected document: Document,\n    deferAnchors) {\n    super(element, checker, ngZone, document, deferAnchors);\n    this.savePreviouslyFocusedElement();\n  }\n\n  restoreFocus() {\n    this.previouslyFocusedElement.focus();\n    this.destroy();\n  }\n\n  blurPreviouslyFocusedElement() {\n    this.previouslyFocusedElement.blur();\n  }\n\n  protected savePreviouslyFocusedElement() {\n    this.previouslyFocusedElement = this.document.activeElement as HTMLElement;\n  }\n}\n\n@Injectable()\nexport class NbFocusTrapFactoryService extends FocusTrapFactory {\n  constructor(\n    protected checker: InteractivityChecker,\n    protected ngZone: NgZone,\n    @Inject(NB_DOCUMENT) private document) {\n    super(checker, ngZone, document);\n  }\n\n  create(element: HTMLElement, deferCaptureElements?: boolean): NbFocusTrap {\n    return new NbFocusTrap(element, this.checker, this.ngZone, this.document, deferCaptureElements);\n  }\n}\n"]}