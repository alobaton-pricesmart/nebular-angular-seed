{"version":3,"file":"datepicker.component.js","sourceRoot":"","sources":["../../../../../.ng_build/theme/components/datepicker/datepicker.component.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport {\n  Component,\n  ComponentFactoryResolver,\n  ComponentRef,\n  OnChanges,\n  ElementRef,\n  EventEmitter,\n  Inject,\n  Input,\n  OnDestroy,\n  Output,\n  Type,\n  AfterViewInit,\n  OnInit,\n  SimpleChanges,\n  Optional,\n} from '@angular/core';\nimport { takeWhile } from 'rxjs/operators';\nimport { Observable, ReplaySubject, Subject } from 'rxjs';\n\nimport {\n  NbAdjustableConnectedPositionStrategy,\n  NbAdjustment,\n  NbComponentPortal,\n  NbOverlayRef,\n  NbOverlayService,\n  NbPosition,\n  NbPositionBuilderService,\n  NbTrigger,\n  NbTriggerStrategy,\n  NbTriggerStrategyBuilderService,\n  patch,\n} from '../cdk';\nimport { NbDatepickerContainerComponent } from './datepicker-container.component';\nimport { NB_DOCUMENT } from '../../theme.options';\nimport { NbCalendarRange, NbCalendarRangeComponent } from '../calendar/calendar-range.component'\nimport { NbCalendarComponent } from '../calendar/calendar.component';\nimport {\n  NbCalendarCell,\n  NbCalendarSize,\n  NbCalendarViewMode,\n  NbDateService,\n} from '../calendar-kit';\nimport { NB_DATE_SERVICE_OPTIONS, NbDatepicker, NbPickerValidatorConfig } from './datepicker.directive';\n\n\n/**\n * The `NbBasePicker` component concentrates overlay manipulation logic.\n * */\nexport abstract class NbBasePicker<D, T, P>\n                extends NbDatepicker<T>\n                implements OnInit, OnChanges, AfterViewInit, OnDestroy {\n  /**\n   * Datepicker date format. Can be used only with date adapters (moment, date-fns) since native date\n   * object doesn't support formatting.\n   * */\n  @Input() format: string;\n\n  /**\n   * Defines if we should render previous and next months\n   * in the current month view.\n   * */\n  @Input() boundingMonth: boolean = true;\n\n  /**\n   * Defines starting view for calendar.\n   * */\n  @Input() startView: NbCalendarViewMode = NbCalendarViewMode.DATE;\n\n  /**\n   * Minimum available date for selection.\n   * */\n  @Input() min: T;\n\n  /**\n   * Maximum available date for selection.\n   * */\n  @Input() max: T;\n\n  /**\n   * Predicate that decides which cells will be disabled.\n   * */\n  @Input() filter: (T) => boolean;\n\n  /**\n   * Custom day cell component. Have to implement `NbCalendarCell` interface.\n   * */\n  @Input() dayCellComponent: Type<NbCalendarCell<D, T>>;\n\n  /**\n   * Custom month cell component. Have to implement `NbCalendarCell` interface.\n   * */\n  @Input() monthCellComponent: Type<NbCalendarCell<D, T>>;\n\n  /**\n   * Custom year cell component. Have to implement `NbCalendarCell` interface.\n   * */\n  @Input() yearCellComponent: Type<NbCalendarCell<D, T>>;\n\n  /**\n   * Size of the calendar and entire components.\n   * Can be 'medium' which is default or 'large'.\n   * */\n  @Input() size: NbCalendarSize = NbCalendarSize.MEDIUM;\n\n  /**\n   * Depending on this date a particular month is selected in the calendar\n   */\n  @Input() visibleDate: D;\n\n  /**\n   * Hide picker when a date or a range is selected, `true` by default\n   * @type {boolean}\n   */\n  @Input() hideOnSelect: boolean = true;\n\n  /**\n   * Calendar component class that has to be instantiated inside overlay.\n   * */\n  protected abstract pickerClass: Type<P>;\n\n  /**\n   * Overlay reference object.\n   * */\n  protected ref: NbOverlayRef;\n\n  /**\n   * Datepicker container that contains instantiated picker.\n   * */\n  protected container: ComponentRef<NbDatepickerContainerComponent>;\n\n  /**\n   * Positioning strategy used by overlay.\n   * */\n  protected positionStrategy: NbAdjustableConnectedPositionStrategy;\n\n  /**\n   * HTML input reference to which datepicker connected.\n   * */\n  protected hostRef: ElementRef;\n\n  protected init$: ReplaySubject<void> = new ReplaySubject<void>();\n\n  /**\n   * Stream of picker changes. Required to be the subject because picker hides and shows and picker\n   * change stream becomes recreated.\n   * */\n  protected onChange$: Subject<T> = new Subject();\n\n  /**\n   * Reference to the picker instance itself.\n   * */\n  protected pickerRef: ComponentRef<any>;\n\n  protected alive: boolean = true;\n\n  /**\n   * Queue contains the last value that was applied to the picker when it was hidden.\n   * This value will be passed to the picker as soon as it shown.\n   * */\n  protected queue: T | undefined;\n\n  protected blur$: Subject<void> = new Subject<void>();\n\n  constructor(@Inject(NB_DOCUMENT) protected document,\n              protected positionBuilder: NbPositionBuilderService,\n              protected triggerStrategyBuilder: NbTriggerStrategyBuilderService,\n              protected overlay: NbOverlayService,\n              protected cfr: ComponentFactoryResolver,\n              protected dateService: NbDateService<D>,\n              @Optional() @Inject(NB_DATE_SERVICE_OPTIONS) protected dateServiceOptions,\n  ) {\n    super();\n  }\n\n  /**\n   * Returns picker instance.\n   * */\n  get picker(): any {\n    return this.pickerRef && this.pickerRef.instance;\n  }\n\n  /**\n   * Stream of picker value changes.\n   * */\n  get valueChange(): Observable<T> {\n    return this.onChange$.asObservable();\n  }\n\n  get isShown(): boolean {\n    return this.ref && this.ref.hasAttached();\n  }\n\n  get init(): Observable<void> {\n    return this.init$.asObservable();\n  }\n\n  /**\n   * Emits when datepicker looses focus.\n   */\n  get blur(): Observable<void> {\n    return this.blur$.asObservable();\n  }\n\n  protected abstract get pickerValueChange(): Observable<T>;\n\n  ngOnInit() {\n    this.checkFormat();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.format && !changes.format.isFirstChange()) {\n      this.checkFormat();\n    }\n  }\n\n  ngAfterViewInit() {\n    this.init$.next();\n  }\n\n  ngOnDestroy() {\n    this.alive = false;\n    this.hide();\n    this.init$.complete();\n\n    if (this.ref) {\n      this.ref.dispose();\n    }\n  }\n\n  /**\n   * Datepicker knows nothing about host html input element.\n   * So, attach method attaches datepicker to the host input element.\n   * */\n  attach(hostRef: ElementRef) {\n    this.hostRef = hostRef;\n    this.subscribeOnTriggers();\n  }\n\n  getValidatorConfig(): NbPickerValidatorConfig<T> {\n    return { min: this.min, max: this.max, filter: this.filter };\n  }\n\n  show() {\n    if (!this.ref) {\n      this.createOverlay();\n    }\n\n    this.openDatepicker();\n  }\n\n  shouldHide(): boolean {\n    return this.hideOnSelect && !!this.value;\n  }\n\n  hide() {\n    if (this.ref) {\n      this.ref.detach();\n    }\n\n    // save current value if picker was rendered\n    if (this.picker) {\n      this.queue = this.value;\n      this.pickerRef.destroy();\n      this.pickerRef = null;\n      this.container = null;\n    }\n  }\n\n  protected abstract writeQueue();\n\n  protected createOverlay() {\n    this.positionStrategy = this.createPositionStrategy();\n    this.ref = this.overlay.create({\n      positionStrategy: this.positionStrategy,\n      scrollStrategy: this.overlay.scrollStrategies.reposition(),\n    });\n    this.subscribeOnPositionChange();\n  }\n\n  protected openDatepicker() {\n    this.container = this.ref.attach(new NbComponentPortal(NbDatepickerContainerComponent, null, null, this.cfr));\n    this.instantiatePicker();\n    this.subscribeOnValueChange();\n    this.writeQueue();\n    this.patchWithInputs();\n  }\n\n  protected createPositionStrategy(): NbAdjustableConnectedPositionStrategy {\n    return this.positionBuilder\n      .connectedTo(this.hostRef)\n      .position(NbPosition.BOTTOM)\n      .adjustment(NbAdjustment.COUNTERCLOCKWISE);\n  }\n\n  protected subscribeOnPositionChange() {\n    this.positionStrategy.positionChange\n      .pipe(takeWhile(() => this.alive))\n      .subscribe((position: NbPosition) => patch(this.container, { position }));\n  }\n\n  protected createTriggerStrategy(): NbTriggerStrategy {\n    return this.triggerStrategyBuilder\n      .trigger(NbTrigger.FOCUS)\n      .host(this.hostRef.nativeElement)\n      .container(() => this.container)\n      .build();\n  }\n\n  protected subscribeOnTriggers() {\n    const triggerStrategy = this.createTriggerStrategy();\n    triggerStrategy.show$.pipe(takeWhile(() => this.alive)).subscribe(() => this.show());\n    triggerStrategy.hide$.pipe(takeWhile(() => this.alive)).subscribe(() => {\n      this.blur$.next();\n      this.hide();\n    });\n  }\n\n  protected instantiatePicker() {\n    this.pickerRef = this.container.instance.attach(new NbComponentPortal(this.pickerClass, null, null, this.cfr));\n  }\n\n  /**\n   * Subscribes on picker value changes and emit data through this.onChange$ subject.\n   * */\n  protected subscribeOnValueChange() {\n    this.pickerValueChange.subscribe(date => {\n      this.onChange$.next(date);\n    });\n  }\n\n  protected patchWithInputs() {\n    this.picker.boundingMonth = this.boundingMonth;\n    this.picker.startView = this.startView;\n    this.picker.min = this.min;\n    this.picker.max = this.max;\n    this.picker.filter = this.filter;\n    this.picker._cellComponent = this.dayCellComponent;\n    this.picker.monthCellComponent = this.monthCellComponent;\n    this.picker._yearCellComponent = this.yearCellComponent;\n    this.picker.size = this.size;\n    this.picker.visibleDate = this.visibleDate;\n  }\n\n  protected checkFormat() {\n    if (this.dateService.getId() === 'native' && this.format) {\n      throw new Error('Can\\'t format native date. To use custom formatting you have to install @nebular/moment or ' +\n        '@nebular/date-fns package and import NbMomentDateModule or NbDateFnsDateModule accordingly.' +\n        'More information at \"Formatting issue\" ' +\n        'https://akveo.github.io/nebular/docs/components/datepicker/overview#nbdatepickercomponent');\n    }\n\n    const isFormatSet = this.format || (this.dateServiceOptions && this.dateServiceOptions.format);\n    if (this.dateService.getId() === 'date-fns' && !isFormatSet) {\n      throw new Error('format is required when using NbDateFnsDateModule');\n    }\n  }\n}\n\n/**\n * The DatePicker components itself.\n * Provides a proxy to `NbCalendar` options as well as custom picker options.\n */\n@Component({\n  selector: 'nb-datepicker',\n  template: '',\n})\nexport class NbDatepickerComponent<D> extends NbBasePicker<D, D, NbCalendarComponent<D>> {\n  protected pickerClass: Type<NbCalendarComponent<D>> = NbCalendarComponent;\n\n  /**\n   * Date which will be rendered as selected.\n   * */\n  @Input() set date(date: D) {\n    this.value = date;\n  }\n\n  /**\n   * Emits date when selected.\n   * */\n  @Output() get dateChange(): EventEmitter<D> {\n    return this.valueChange as EventEmitter<D>;\n  }\n\n  get value(): D | undefined {\n    return this.picker ? this.picker.date : undefined;\n  }\n\n  set value(date: D) {\n    if (!this.picker) {\n      this.queue = date;\n      return;\n    }\n\n    if (date) {\n      this.picker.visibleDate = date;\n      this.picker.date = date;\n    }\n  }\n\n  protected get pickerValueChange(): Observable<D> {\n    return this.picker.dateChange;\n  }\n\n  protected writeQueue() {\n    this.value = this.queue;\n  }\n}\n\n/**\n * The RangeDatePicker components itself.\n * Provides a proxy to `NbCalendarRange` options as well as custom picker options.\n */\n@Component({\n  selector: 'nb-rangepicker',\n  template: '',\n})\nexport class NbRangepickerComponent<D> extends NbBasePicker<D, NbCalendarRange<D>, NbCalendarRangeComponent<D>> {\n  protected pickerClass: Type<NbCalendarRangeComponent<D>> = NbCalendarRangeComponent;\n\n  /**\n   * Range which will be rendered as selected.\n   * */\n  @Input() set range(range: NbCalendarRange<D>) {\n    this.value = range;\n  }\n\n  /**\n   * Emits range when start selected and emits again when end selected.\n   * */\n  @Output() get rangeChange(): EventEmitter<NbCalendarRange<D>> {\n    return this.valueChange as EventEmitter<NbCalendarRange<D>>;\n  }\n\n  get value(): NbCalendarRange<D> | undefined {\n    return this.picker ? this.picker.range : undefined;\n  }\n\n  set value(range: NbCalendarRange<D>) {\n    if (!this.picker) {\n      this.queue = range;\n      return;\n    }\n\n    if (range) {\n      this.picker.visibleDate = range && range.start;\n      this.picker.range = range;\n    }\n  }\n\n  protected get pickerValueChange(): Observable<NbCalendarRange<D>> {\n    return this.picker.rangeChange;\n  }\n\n  shouldHide(): boolean {\n    return super.shouldHide() && !!(this.value && this.value.start && this.value.end);\n  }\n\n  protected writeQueue() {\n    this.value = this.queue;\n  }\n}\n"]}